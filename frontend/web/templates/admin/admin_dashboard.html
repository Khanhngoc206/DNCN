{% extends "admin/admin_base.html" %}
{% block content %}
<div class="container mt-4">
    <h3 class="mb-4">üìä Dashboard Qu·∫£n Tr·ªã H·ªá Th·ªëng</h3>

    <div class="row g-3">

        <div class="col-md-3">
            <div class="card shadow-sm p-3">
                <h6>T·ªïng doanh thu</h6>
                <h3 class="text-primary">{{ tong_doanh_thu }} VND</h3>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow-sm p-3">
                <h6>T·ªïng ƒë∆°n h√†ng</h6>
                <h3 class="text-success">{{ tong_don_hang }}</h3>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow-sm p-3">
                <h6>Size b√°n nhi·ªÅu nh·∫•t</h6>
                <h3>{{ size_max|default:"-" }}</h3>
            </div>
        </div>

        <div class="col-md-3">
            <div class="card shadow-sm p-3">
                <h6>S·∫£n ph·∫©m b√°n ch·∫°y nh·∫•t</h6>
                <h3>{{ sp_best|default:"-" }}</h3>
            </div>
        </div>
    </div>

    <!-- ==============================
        BI·ªÇU ƒê·ªí DOANH THU
    =============================== -->
    <div class="card shadow-sm p-3 mt-4">
        <h5>üìà Doanh thu theo th√°ng</h5>
        <canvas id="revenueChart" height="120"></canvas>
    </div>

    <!-- ==============================
        BI·ªÇU ƒê·ªí SIZE
    =============================== -->
    <div class="card shadow-sm p-3 mt-4">
        <h5>üìä S·ªë l∆∞·ª£ng b√°n theo size</h5>
        <canvas id="sizeChart" height="120"></canvas>
    </div>
</div>

<!-- ================= JS CHART.JS ================= -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<script>
    // ================= DOANH THU BI·ªÇU ƒê·ªí =================
    const revenueLabels = {{ labels_revenue|safe }};
    const revenueValues = {{ values_revenue|safe }};

    new Chart(document.getElementById("revenueChart"), {
        type: "line",
        data: {
            labels: revenueLabels,
            datasets: [{
                label: "Doanh thu",
                data: revenueValues,
                borderWidth: 2,
                tension: 0.3
            }]
        }
    });

    // ================= SIZE BI·ªÇU ƒê·ªí =================
    const sizeLabels = {{ labels_size|safe }};
    const sizeValues = {{ values_size|safe }};

    new Chart(document.getElementById("sizeChart"), {
        type: "bar",
        data: {
            labels: sizeLabels,
            datasets: [{
                label: "S·ªë l∆∞·ª£ng",
                data: sizeValues,
                borderWidth: 2
            }]
        }
    });
</script>

{% endblock %}
